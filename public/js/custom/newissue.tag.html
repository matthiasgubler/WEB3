<newissue show="{ display }">
    <section id="newissue">
        <select ref="priority">
            <option selected="true" disabled="true">Priority</option>
            <option>1</option>
            <option>2</option>
            <option>3</option>
        </select>

        <label for="issuedate">Datum: </label>
        <input type="text" id="issuedate" placeholder="[DD.MM.YYYY]" ref="date"/>
        <input id="inputnewissue" type="text" class="form-control" name="inputnewissue" placeholder="new issue..."
               ref="title">
        <button id="newIssueButton" onclick="{ addIssue }">Create Issue</button>
    </section>
    <script>
        var tag = this;
        tag.display = false;
        tag.current_project_id = null;

        this.on('mount', function () {
            $("#issuedate").datepicker({
                dateFormat: 'dd.mm.yy'
            });
        });

        store.subscribe(() => {
            let storedCurrentProject = store.getState().currentProject;
            tag.display = storedCurrentProject != null;
            if (tag.display) {
                tag.current_project_id = storedCurrentProject;
            }

            tag.update();
        });

        addIssue(e)
        {
            let issue = new Issue(this.refs.title.value, this.refs.date.value, false, this.refs.priority.value, tag.current_project_id);

            store.dispatch(addIssueAction(issue));
            this.refs.title.value = '';
            this.refs.date.value = '';
            this.refs.priority.value = 'Priority';
            e.preventDefault()
        }

    </script>
</newissue>