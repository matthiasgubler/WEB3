<projectlist>
    <section id="projects">
        <fieldset>
            <legend class="rainbow2">Projects :-)</legend>
            <div class="form-group">
                <label for="projectsList">Projects:</label>
                <select class="form-control" id="projectsList" ref="project">
                    <option each="{ project in allProjects() }" value="{ project.identifier }" onchange="{ projectChange }">{ project.title }</option>
                </select>
            </div>
            <input id="inputnewproject" type="text" class="form-control" name="inputnewproject"
                   placeholder="new project...">
            <button id="newProjectButton" onclick="{ addProject }">Create Project</button>
            <script>
                var tag = this;
                tag.projects = new ProjectCollection(this);
                tag.projects.add(new Project("Testeeeoor"));
                tag.allProjects = function () {
                    return tag.projects.get();
                }

                projectChange(e){
                    tag.bus.trigger('projectChange', this.refs.project.value);
                    e.preventDefault();
                };
                addProject(e){
                    this.bus.trigger('projectAdded', new Project(this.refs.title.value));
                    e.preventDefault();
                };
                this.bus.on('projectAdded', function(project){
                    console.log(project);
                    tag.projects.add(project);
                    tag.update();
                });

            </script>
        </fieldset>
    </section>
</projectlist>